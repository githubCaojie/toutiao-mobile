<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">

<head>
<title></title>
<template th:substituteby="framework/pageset.html"></template>
</head>
<body>
	<div id="app" view>
		<hy-filllayout rows="*,40" :showborder="true"  :showpadding="false"> 
			<hy-fillarea >
		         	<hy-tree id="myOrgTree" v-model="MyEqExtModelTree"  :checkstrictly="false" 
				 		  :onlyselectleaf="true" :dynamic="false" :rootvisible="false" :rootCode="tableId"
					      :expandlevel="6" dataprovider="com.haiyisoft.hequip.tree.MyEqExtModelTree">
				</hy-tree>
		      </hy-fillarea>
		      <hy-fillarea >
				<table width="100%"><tr>
					<td align="center"> <hy-button text="确定" @click="ok"></hy-button>
				<hy-button text="取消" @click="cancel"></hy-button></td>	</tr></table>
			</hy-fillarea> 
		</hy-filllayout>
	</div>
	<script th:inline="javascript">
	var perUuid;
	var vm = new Vue({
		el : "#app",
		data : {
			entityClass:'',MyEqExtModelTree:''
		},
		mounted : function(){
		},
		methods : {				
			query : function(){
				var gridData = ajaxgrid.collectData(true) ;
				var dataArr = [];
				dataArr.push(gridData) ;
				$.request({
					url : $$pageContextPath + 'jt/jtQrTable/query',
					data : dataArr,
					success : function(response){
						ajaxgrid.setData(response.getAjaxDataWrap("dataWrap"));
					}
				});					
			},
			detail : function(row){
				$.popWindow({
					url:$$pageContextPath + 'jt/jtQrTable/queryOne?editFlag=N&id='+row.id,
					title: "详细",
					callback: vm.onsavecomplete,
					css:{width:800,height:400},
					button:0,
					isRunCallback :true
				});
			},
			onsavecomplete : function(response,b,c){
				vm.query();
			},
			ok : function(){
				 if(!this.MyEqExtModelTree)
					 return setRM("alert","请选择节点");
				 $.close(this.MyEqExtModelTree);
			},
			dbSelectRow : function(row){
				vm.ok();
			},
			cancel : function() {
				$.close();
			}
		}
		
	});
	</script>
</body>
</html>