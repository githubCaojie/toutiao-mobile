<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">

<head>
<title></title>
<template th:substituteby="framework/pageset.html"></template>
</head>
<body>
	<div id="app" view>
		<hy-filllayout rows="queryh,*,toolh" :showborder="true"  :showpadding="false"> 
			<hy-fillarea title="查询条件">
				 <table>
		              <tr>
		              	<td align="right" width="80px">名称</td>
			            <td width="200px" align="left"><hy-input  name="dataWrap.query.typeName_LIKE"  :upload="true"> </td>
						<td align="right"width="80"><hy-button text="查询" @click="query"></hy-button></td>
		              <tr />
		            </table>
			</hy-fillarea> 
			<hy-fillarea >
		          <hy-table border name="dataWrap" id="ajaxgrid" :readonly="true" height="100%"
						@queryfunc="query" titlealign="center" style="width: 100%">
						<hy-table-column title="序号" align="center" width="60" type="index"></hy-table-column>
						<hy-table-column title="多选" align="center" type="selection"></hy-table-column> 
						<hy-table-column title="名称"  name="typeName"align="center"	width="150"></hy-table-column> 
						<hy-table-column title="字段类型"  name="fieldType" align="center" type="drop" dropname="JT.FIELD_TYPE" width="100"></hy-table-column> 
						<hy-table-column title="输入方式"  name="inputType" align="center" type="drop" dropname="JT.INPUT_FORM"  width="100"></hy-table-column> 
						<hy-table-column title="扩展值"  name="extValue" align="center"  width="100"></hy-table-column> 
						<hy-table-column title="扩展值2"  name="extValue2" align="center"  width="100"></hy-table-column> 
						<hy-table-column title="默认值"  name="defaultValue" align="center"  width="120"></hy-table-column> 
						<hy-table-column title="固定属性"  name="fixFlag" align="center" type="drop" dropname="UEP.YES_OR_NO" width="100"></hy-table-column> 
						<hy-table-column title="排序号"  name="orderSn" align="center"  width="80"></hy-table-column> 
					</hy-table>  
		      </hy-fillarea>
		    <hy-fillarea align="right">
	      		<div style="float:right">
					<hy-button text="确定" @click="ok"></hy-button>	
					<hy-button text="取消" @click="cancel"></hy-button>	
	      		</div>
			</hy-fillarea>
		</hy-filllayout>
	</div>
	<script th:inline="javascript">
	var perUuid;
	var vm = new Vue({
		el : "#app",
		data : {
		},
		mounted : function(){
			ajaxgrid.setData(response.getAjaxDataWrap("dataWrap"));
		},
		methods : {	
			detail : function(row){
				$.showModalDialog($$pageContextPath + 'jt/jtExtFieldType/pageForm?id='+row.id, "详细", vm.onsavecomplete, null, 1200, 800, 0);
			},
			query : function(){
				var gridData = ajaxgrid.collectData(true) ;
				var dataArr = [];
				dataArr.push(gridData) ;
				$.request({
					url : $$pageContextPath + 'jt/jtExtFieldType/list',
					data : dataArr,
					success : function(response){
						ajaxgrid.setData(response.getAjaxDataWrap("dataWrap"));
					}
				});							
			},
			cancel:function () {
				$.close();
			},
			selectRow : function(row){
				grid1.setRowChecked(row.keyId-1);
			},
			ok :function () {
				var checked = ajaxgrid.getCheckedRecords();
				if (checked.length <= 0) {
					$.alert("error", "请选择数据!");
				}else{
					$.close(checked);
				}
			}
		}
	});
	</script>
</body>
</html>