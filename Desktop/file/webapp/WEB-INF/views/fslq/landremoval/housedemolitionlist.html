<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
<title></title>
<template th:substituteby="framework/pageset.html"></template>
<link rel="stylesheet" type="text/css" href="../../vue/hyfileupload.css"/>
	<script type="text/javascript" src="../../vue/hyfileupload.js"></script>
	<style>
	.dataKan{
		height: 90%;float: left;border-radius:10px;margin: 5px;width: 16%;
	}
	
	.dataKan1{
		text-align: center;line-height: 65px;font-size: 18px;font-weight: 1000;float: left;font-weight: 1000;margin-top: 10px;
	}
	
	.dataKan2{
		height: 50%;text-align: center;line-height: 40px;font-size: 18px;font-weight: 1000;float: left;
	}
</style>
</head>
<body>
	<div id="app" view>
		<hy-filllayout cols="*">
			  
			<hy-fillarea>
		<hy-filllayout rows="queryh,toolh,*" :showborder="true"  :showpadding="false"> 
			 <!-- <hy-fillarea style="height:103">
				 <div style="width: 100%;height: 100%;background: white;color: white;">
	        		<div style="background: #ffb925;" class="dataKan">
	        			<div style="width: 61%;" class="dataKan1"><div style="float: left;margin-left: 5px;"><img style="width: 60px;height: 60px;" src="../images/1/1_03.png"/></div><div style="float: left;margin-left: 5px;font-size: 22px;">河砂</div></div>
	        			<div style="width: 38%;" class="dataKan2" id="wzhs_count"></div>
	        			<div style="width: 38%;" class="dataKan2" id="wzhs_sum"></div>
	        		</div>
	        		<div style="background: #38cb35;" class="dataKan">
	        			<div style="width: 61%;" class="dataKan1"><div style="float: left;margin-left: 5px;"><img style="width: 60px;height: 60px;" src="../images/1/1_05.png"/></div><div style="float: left;margin-left: 5px;font-size: 22px;">碎石</div></div>
	        			<div style="width: 38%;"class="dataKan2" id="wzss_count"></div>
	        			<div style="width: 38%;"class="dataKan2" id="wzss_sum"></div>
	        		</div>
	        		<div style="background: #00a4ff;" class="dataKan">
	        			<div style="width: 61%;" class="dataKan1"><div style="float: left;margin-left: 5px;"><img style="width: 60px;height: 60px;" src="../images/1/1_07.png"/></div><div style="float: left;margin-left: 5px;font-size: 22px;">带肋钢筋</div></div>
	        			<div style="width: 38%;"class="dataKan2" id="wzdl_count"></div>
	        			<div style="width: 38%;"class="dataKan2" id="wzdl_sum"></div>
	        		</div>
	        		<div style="background: #00d2d3;" class="dataKan">
	        			<div style="width: 61%;" class="dataKan1"><div style="float: left;margin-left: 5px;"><img style="width: 60px;height: 60px;" src="../images/1/1_09.png"/></div><div style="float: left;margin-left: 5px;font-size: 22px;">光圆钢筋</div></div>
	        			<div style="width: 38%;"class="dataKan2" id="wzgy_count"></div>
	        			<div style="width: 38%;"class="dataKan2" id="wzgy_sum"></div>
	        		</div>
	        		<div style="background: #9f56f7;" class="dataKan">
	        			<div style="width: 61%;" class="dataKan1"><div style="float: left;margin-left: 5px;"><img style="width: 60px;height: 60px;" src="../images/3/3_11.png"/></div><div style="float: left;margin-left: 5px;font-size: 22px;">钢绞线</div></div>
	        			<div style="width: 38%;"class="dataKan2" id="wzgj_count"></div>
	        			<div style="width: 38%;"class="dataKan2" id="wzgj_sum"></div>
	        		</div>
	        		<div style="background: #ffb925;" class="dataKan">
	        			<div style="width: 61%;" class="dataKan1"><div style="float: left;margin-left: 5px;"><img style="width: 60px;height: 60px;" src="../images/3/3_03.png"/></div><div style="float: left;margin-left: 5px;font-size: 22px;">水泥</div></div>
	        			<div style="width: 38%;"class="dataKan2" id="wszn_count"></div>
	        			<div style="width: 38%;"class="dataKan2" id="wszn_sum"></div>
	        		</div>
	
	        	</div>
			 </hy-fillarea> -->
			 <hy-fillarea title="">
				 <table>
	              <tr>
	                <td align="right" width="80px">类型</td>
					<td align="left" width="120px"><hy-select name="dataWrap.query.fwlx" dropname="ZDCQ.FWLX" :upload="true" clearable></hy-select></td> 
					<td align="right" width="80px">房屋名称</td>
					<td align="left" width="120px"><hy-input name="dataWrap.query.fwmc_LIKE"  :upload="true" ></hy-input></td>
					<td align="right" width="80px">状态</td>
					<td align="left" width="120px"><hy-select name="dataWrap.query.cqzt" dropname="ZDCQ.CQZT" :upload="true" clearable></hy-select></td>
					<td align="right" width="80"><hy-button text="查询" @click="query"></hy-button></td>
           		  </tr>
	            </table>
			</hy-fillarea>  
			<hy-fillarea align="left">
	      		<table style="margin-left:-20px">
			<TBODY>
				<tr>
 					<td align="right" width="10px"></td>
					<td><hy-button text="查看"   @click="detail"/> </td>
				
					 <td ><hy-fileupload title="导入" id="webuploader" @autoupload="submitFile" 
						@error="fileError" @success="uploadSuccess" :displayinfo="false" width="60">
						</hy-fileupload></td>
   						<td><hy-button   @click="daochu()" text="导出" ></hy-button></td> 
  					
		     	  <td><a href="javascript:void(0)" @click="xiazai()"    
		     	  style = "text-decoration: underline ; color :Sky blue; font-size:14px ">模板下载
					</a></td>				
					 
				</tr>
			</TBODY>
		</table>
			</hy-fillarea>
			<hy-fillarea>
		          <hy-table border name="dataWrap" id="ajaxgrid" showpage :readonly="true" height="100%"
						@queryfunc="query" titlealign="center" style="width: 99%">
						<hy-table-column title="序号" align="center" width="50" type="index"></hy-table-column>
						<hy-table-column title="多选" align="center" type="selection"></hy-table-column>
						<hy-table-column title="项目"  name="projectName" align="center"	width="80"></hy-table-column> 
						<hy-table-column title="标段"  name="sectionName" align="center"	width="150"></hy-table-column> 
						  <hy-table-column title="市"  name="cityName" align="center" width="150" ></hy-table-column> 
						<hy-table-column title="区"  name="areaName" align="center"  width="150"></hy-table-column> 
 						<hy-table-column title="镇"  name="townName" align="center" width="100"  ></hy-table-column>   
						<hy-table-column title="房屋编号"  name="fwbh" align="center" width="100" ></hy-table-column>
						<hy-table-column title="房屋类型"  name="fwlx" align="center" width="100" type="drop" dropname="ZDCQ.FWLX"></hy-table-column>
						<hy-table-column title="房屋名称"  name="fwmc" align="center" width="100" ></hy-table-column>
						<hy-table-column title="红线内拆迁面积(m2)"  name="hxnmj" align="center" width="100" ></hy-table-column>
						<hy-table-column title="位置桩号"  name="zh" align="center" width="100" ></hy-table-column>
						<hy-table-column title="拆迁状态"  name="cqzt" align="center" width="100" type="drop" dropname="ZDCQ.CQZT"></hy-table-column>
						<hy-table-column title="计划日期"  name="jhrq" align="center" width="100" type="date"  format="yyyy-MM-dd"></hy-table-column>
						<hy-table-column title="完成日期"  name="wcrq" align="center" width="100" type="date"  format="yyyy-MM-dd"></hy-table-column> 
					    
					</hy-table> 
		      </hy-fillarea>
		</hy-filllayout>
			</hy-fillarea>
		</hy-filllayout>
	</div>
	<script th:inline="javascript">
		var vm = new Vue({
			el : "#app",
			data : {
				  roleTypeClassTree : '0'  
			},
			mounted : function(){
				ajaxgrid.setData(response.getAjaxDataWrap("dataWrap"));
			},
			methods : {
				query : function(response, b, c){
					
					var gridData = ajaxgrid.collectData(true) ;
					var dataArr = [];
					dataArr.push(gridData) ;
					$.request({
						url : $$pageContextPath + 'landremoval/housedemolition/list',
						data : dataArr,
					       
						success : function(response){
							ajaxgrid.setData(response.getAjaxDataWrap("dataWrap"));
						}
					});					
				},
				detail : function(){
					
					var record = ajaxgrid.getSelectedRecord();
					
					if(record== null)
						return setRM("alert","请选择要查看的记录!");
						$.showModalDialog($$pageContextPath + 'landremoval/housedemolition/fix?editFlag=N&uuid='+record.data.uuid, "详细", vm.onsavecomplete, null, 1200, 700, 0);
			  },
				
				onsavecomplete : function(response){
					
					setRM(vm.query());
				},
				
				uploadSuccess : function(WUFile){
					setRM("success","导入成功！",vm.query());
					
				},
				fileError : function(){
					
				},
				submitFile:function(){
			         webuploader.submitFile({
			          action : "upload",//后台处理的函数名
			          server : $$pageContextPath+'landremoval/housedemolition/upload',//请求
			          params:{//请求携带的参数
			        	  /* prjId: prjId,
			        	  contractId: contractId, */
			              param3:"three"
			            }
			        });
			      },
			      daochu  :function(){
						
					   
			            $.confirm("提示","确定导出？",function(){
			            	
			         
			         		var fwlx = $("input[name='dataWrap.query.fwlx']").val();
			         		var cqzt = $("input[name='dataWrap.query.cqzt']").val();
			         		var fwmc = $("input[name='dataWrap.query.fwmc_LIKE']").val();
				            window.location.href=$$pageContextPath+"landremoval/housedemolition/daochu?fwlx="+fwlx+"&fwmc="+fwmc+"&cqzt="+cqzt; 
					　　　},function(){});
					},
					
					xiazai :function(){
						
						$.confirm("提示","确定下载模板？",function(){
				            window.location.href=$$pageContextPath+"landremoval/housedemolition/moban"
					　　　},function(){});

					},
			}
		});
	</script>
</body>
</html>