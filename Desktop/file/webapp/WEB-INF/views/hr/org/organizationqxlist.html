<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">

<head>
<title></title>
<template th:substituteby="framework/pageset.html"></template>
<script th:src="@{/vue/hytreetable.js}"></script>
</head>
<body>
	<div id="app" view>
		<hy-filllayout rows="*" :showborder="false"  :showpadding="true"> 
			<hy-fillarea >
	          <hy-treetable id="treeTable"  sum-text="sum" index-text="#" 
			      :columns="columns":stripe="props.stripe"  :border="props.border"
			      :showheader="props.showHeader" :showsummary="props.showSummary"
			      :showrowhover="props.showRowHover" :showindex="props.showIndex"
			      :treetype="props.treeType" :expandtype="props.expandType"
			      :selectiontype="props.selectionType" 
			      valueprovider = "com.haiyisoft.hr.org.tree.HrOrgTreeGrid">
			   
			    <template slot="option" scope="scope">
			        <hy-button text="权限单位" @click="add(scope.row.code)"> </hy-button>
			      </template>
			       </hy-treetable>
		      </hy-fillarea>
		</hy-filllayout>
	</div>
	<script th:inline="javascript">
		var vm = new Vue({
			el : "#app",
			data : {
				props: {
			          stripe: false,
			          border: false,
			          showHeader: true,
			          showSummary: false,
			          showRowHover: true,
			          showIndex: false,
			          treeType: true,
			          expandType: false,
			          selectionType: false,
			        },
		        columns: [
		                  {
		                    label: '组织机构名称',
		                    prop: 'label',
		                    width: '200px'
		                  },
		                  {
		                    label: '级别',
		                    prop: 'groupLevelName',
		                    width: '60px'
		                  },
		                  {
		                    label: '操作',
		                    prop: 'type',
		                    width: '100px',
		                    type: 'template',
		                    template: 'option',
		                  }
		                  ]
			},
			mounted : function(){
			},
			methods : {				
				add : function(code){
					$.showModalDialog($$pageContextPath + 'jt/right/right1/queryqx?partyIdFrom='+code, "权限", vm.onsavecomplete, null, 800, 400,0);
				},
				onsavecomplete : function(response){
					treeTable.refreshTreeGrid();
				}
			}
			
		});
	</script>
</body>
</html>